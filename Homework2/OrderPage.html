<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body class="bg-dark">
    <div id="divMain" class="d-flex justify-content-center align-items-center vh-100 text-black col-12">
        <div class="card col-12 col-lg-9">
            <div class="card-header">
                <h3 class="text-center">Order</h3>
            </div>
            <div class="card-body">
                <form> 
                    <label for="txtFirstName" class="form-label">First Name</label>
                    <input id="txtFirstName" placeholder="First Name" aria-label="First Name" class="form-control"> 
                    <br>
    
                    <label for="txtLastName" class="form-label">Last Name</label>
                    <input id="txtLastName" type="text" placeholder="Last Name" class="form-control" aria-label="First Name">
                    <br>

                    <label for="txtEmail" class="form-label">Email / Username</label>
                    <input id="txtEmail" type="email" placeholder="Email Address" class="form-control" aria-label="Email Address">
                    <br> 

                    <label for="txtshippingAddress" class="form-label">Address</label>
                    <input id="txtshippingAddress" type="text" placeholder="Shipping Addres" class="form-control" aria-label="Shipping Address">

                    <label for="txtBillingAddress" class="form-label"></label>
                    <input id="txtBillingAddress" type="text" placeholder="Billing Address" class="form-control" aria-label="Billing Address">
                    <br>

                    <label for="telPhone" class="form-label">Phone Number</label>
                    <input id="telPhone" type="tel" placeholder="XXX XXX XXXX" maxlength="10" class="form-control" aria-label="Phone Number">
                    <br>
                    
                    <div class="d-flex felx-row">
                        <lable for="cboTop">Top</lable>
                        <select id="cboTop">

                        </select>
                        <label for="cboBottom">Bottom</label>
                        <select id="cboBottom">

                        </select>
                        <label for="cboShoes">Shoes</label>
                        <select id="cboShoes">

                        </select>
                    </div>
                    <br/>

                    <button id="btnOrder" class="btn btn-primary col-12" type="button">Order</button>
                </form>
                <div id="divDetails">
                    <div class="card">
                        <div class="card-header">
                            <h1>Order '+intOrdered+' Summary</h1>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div id="divLeft" class="col-6">
                                    <h2>'+strFirstName+'</br>'+strLastName+'</br>'+strEmail+'</br>'+strShippingAddress+'</br>'+strBillingAddress+'</br>'+strPhone+'</h2>

                                </div>
                                <div id="divRight" class="col-6">
                                    <h2> '+strTop+' </br> '+strBottom +' </br> '+strShoes+' </h2>

                                </div>
                            </div>
                            <button id="btnRemove" class="btn btn-danger" type="button">Remove Order</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    

    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        var intOrdered = 0;
        $.getJSON('https://www.swollenhippo.com/getTopsByAPIKey.php?APIKey=Mickey2024!',function(resultTop){
            arrTop = resultTop;

            arrTop.forEach(function(top){
                let strHTML = '<option value="' + top.Description + '">' + top.Description + '</option>';
                $('#cboTop').append(strHTML);
            })
        })

        $.getJSON('https://www.swollenhippo.com/getShoesByAPIKey.php?APIKey=Mickey2024!', function(resultShoes){
            arrShoes = resultShoes;
            arrShoes.forEach(function(shoes){
                let strHTML = '<option value="' + shoes.Description + '">' + shoes.Description + '</option>';
                $('#cboShoes').append(strHTML);
            })

        })

        $.getJSON('https://www.swollenhippo.com/getBottomsByAPIKey.php?APIKey=Mickey2024!', function(resultBottom){
            arrBottom = resultBottom;
            arrBottom.forEach(function(bottom){
                let strHTML = '<option value="' + bottom.Description + '">' + bottom.Description + '</option>';
                $('#cboBottom').append(strHTML);
            })

        })

        $(document).on('click','#btnRemove',function(){
            let strSearched = $(this).attr('data-searched');
            console.log(strSearched);
            $('#div' + strSearched).remove();
        })

        $('#btnSearch').on('click',function(){
            console.log('Clicked Search');
            let strCodename = $('#cboCharacters').val();
            $.getJSON('https://www.swollenhippo.com/getProfileDetailsByAPIKey.php?APIKey=Mickey2022!&Codename=' + strCodename,function(result){
                console.log(result);
                let strHTML = '<div id="div' + intSearched + '" class="card"><div class="card-header"><h3>' + result.CodeName +'</h3></div><div class="card-body"><div class="col-12 d-flex justify-content-center"><img class="rounded-circle" src="' + result.Image + '"></div><h2 class="text-center col-12">' + result.FirstName + '</h2><h3 class="text-center col-12">' + result.LastName + '</h3><button id="btnReset" data-searched="' + intSearched + '" type="button" class="col-12 btn btn-danger">Reset</button></div></div>'
                $('#divDetails').append(strHTML);
                $('#divMain').removeClass('align-items-center').addClass('mt-5');
                intSearched += 1;
                if(intSearched > 1) {
                    $('#divMain').removeClass('vh-100');
                }
            })           
        })

        $('#btnOrder').on('click',function(){
            console.log('Clicked Order');
            let strTop = $('#cboTop').val();
            let strBottom = $('#cboBottom').val();
            let strShoes = $('#cboShoes').val();
            let strFirstName = $('#txtFirstName').val();
            let strLastName = $('#txtLastName').val();
            let strEmail = $('#txtEmail').val();
            let strShippingAddress =$('#txtShippingAddress').val();
            let strBillingAddress = $('#txtBillingAddress').val();
            let strPhone = $('#telPhone').val();
                            
            let strHTML = '<div class="card"><div class="card-header"><h1>Order '+intOrdered+' Summary</h1></div><div class="card-body"><div class="row"><div id="divLeft" class="col-6"><h2>'+strFirstName+'</br>'+strLastName+'</br>'+strEmail+'</br>'+strShippingAddress+'</br>'+strBillingAddress+'</br>'+strPhone+'</h2></div><div id="divRight" class="col-6"><h2> '+strTop+' </br> '+strBottom +' </br> '+strShoes+' </h2></div></div><button id="btnRemove" class="btn btn-danger" type="button">Remove Order</button></div></div>'
            $('#divDetails').append(strHTML);
            $('#divMain').removeClass('align-items-center').addClass('mt-5');
            intOrdered += 1;
            if(intOrdered > 1){
                $('#divMain').removeClass('vh-100')
            }
            
        });
    </script>
</body>
</html>